# çœŸå®æ•°æ®æºå®šä¹‰ mä¸ºä¸»åº“ sä¸ºä»åº“
spring.shardingsphere.datasource.names = m0,m1,m2,s0,s1,s2
spring.shardingsphere.datasource.m0.type = com.alibaba.druid.pool.DruidDataSource
spring.shardingsphere.datasource.m0.driverâ€classâ€name = com.mysql.jdbc.Driver
spring.shardingsphere.datasource.m0.url = jdbc:mysql://localhost:3306/store_db?useUnicode=true
spring.shardingsphere.datasource.m0.username = root
spring.shardingsphere.datasource.m0.password = root
spring.shardingsphere.datasource.m1.type = com.alibaba.druid.pool.DruidDataSource
spring.shardingsphere.datasource.m1.driverâ€classâ€name = com.mysql.jdbc.Driver
spring.shardingsphere.datasource.m1.url = jdbc:mysql://localhost:3306/product_db_1?useUnicode=true
spring.shardingsphere.datasource.m1.username = root
spring.shardingsphere.datasource.m1.password = root
spring.shardingsphere.datasource.m2.type = com.alibaba.druid.pool.DruidDataSource
spring.shardingsphere.datasource.m2.driverâ€classâ€name = com.mysql.jdbc.Driver
spring.shardingsphere.datasource.m2.url = jdbc:mysql://localhost:3306/product_db_2?useUnicode=true
spring.shardingsphere.datasource.m2.username = root
spring.shardingsphere.datasource.m2.password = root
spring.shardingsphere.datasource.s0.type = com.alibaba.druid.pool.DruidDataSource
spring.shardingsphere.datasource.s0.driverâ€classâ€name = com.mysql.jdbc.Driver
spring.shardingsphere.datasource.s0.url = jdbc:mysql://localhost:3307/store_db?useUnicode=true
spring.shardingsphere.datasource.s0.username = root
spring.shardingsphere.datasource.s0.password = root
spring.shardingsphere.datasource.s1.type = com.alibaba.druid.pool.DruidDataSource
spring.shardingsphere.datasource.s1.driverâ€classâ€name = com.mysql.jdbc.Driver
spring.shardingsphere.datasource.s1.url = jdbc:mysql://localhost:3307/product_db_1?useUnicode=true
spring.shardingsphere.datasource.s1.username = root
spring.shardingsphere.datasource.s1.password = root
spring.shardingsphere.datasource.s2.type = com.alibaba.druid.pool.DruidDataSource
spring.shardingsphere.datasource.s2.driverâ€classâ€name = com.mysql.jdbc.Driver
spring.shardingsphere.datasource.s2.url = jdbc:mysql://localhost:3307/product_db_2?useUnicode=true
spring.shardingsphere.datasource.s2.username = root
spring.shardingsphere.datasource.s2.password = root

# ä¸»åº“ä»åº“é€»è¾‘æ•°æ®æºå®šä¹‰ ds0ä¸ºstore_db ds1ä¸ºproduct_db_1 ds2ä¸ºproduct_db_2
spring.shardingsphere.sharding.masterâ€slaveâ€rules.ds0.masterâ€dataâ€sourceâ€name=m0
spring.shardingsphere.sharding.masterâ€slaveâ€rules.ds0.slaveâ€dataâ€sourceâ€names=s0
spring.shardingsphere.sharding.masterâ€slaveâ€rules.ds1.masterâ€dataâ€sourceâ€name=m1
spring.shardingsphere.sharding.masterâ€slaveâ€rules.ds1.slaveâ€dataâ€sourceâ€names=s1
spring.shardingsphere.sharding.masterâ€slaveâ€rules.ds2.masterâ€dataâ€sourceâ€name=m2
spring.shardingsphere.sharding.masterâ€slaveâ€rules.ds2.slaveâ€dataâ€sourceâ€names=s2


## ğŸŒŸ ğŸŒŸ ğŸŒŸ  defaultâ€databaseâ€strategy  ä¸éœ€è¦æŒ‡å®šè¡¨äº†ï¼Œé»˜è®¤çš„åˆ†åº“ç­–ç•¥å°±ç”¨è¿™ä¸ª   ğŸŒŸ ğŸŒŸ ğŸŒŸ
# é»˜è®¤åˆ†åº“ç­–ç•¥ï¼Œä»¥store_info_idä¸ºåˆ†ç‰‡é”®ï¼Œåˆ†ç‰‡ç­–ç•¥ä¸ºstore_info_id % 2 + 1ï¼Œä¹Ÿå°±æ˜¯store_info_idä¸ºåŒæ•°çš„æ•°æ®è¿›å…¥ds1ï¼Œä¸ºå•æ•°çš„è¿›å…¥ds2     å•†å“è¡¨åœ¨m1å’Œm2ä¸­æ‰æœ‰
spring.shardingsphere.sharding.defaultâ€databaseâ€strategy.inline.shardingâ€column = store_info_id
spring.shardingsphere.sharding.defaultâ€databaseâ€strategy.inline.algorithmâ€expression = ds$â€>{store_info_id % 2 + 1}

# store_info æ²¡æœ‰åˆ†è¡¨ç­–ç•¥ï¼Œå›ºå®šåˆ†é…è‡³ds0çš„store_infoçœŸå®è¡¨ï¼Œ
spring.shardingsphere.sharding.tables.store_info.actualâ€dataâ€nodes = ds$â€>{0}.store_info
spring.shardingsphere.sharding.tables.store_info.tableâ€strategy.inline.shardingâ€column = id
spring.shardingsphere.sharding.tables.store_info.tableâ€strategy.inline.algorithmâ€expression = store_info



# product_infoåˆ†è¡¨ç­–ç•¥ï¼Œåˆ†å¸ƒåœ¨ds1,ds2çš„product_info_1 product_info_2è¡¨ ï¼Œåˆ†ç‰‡ç­–ç•¥ä¸ºproduct_info_id% 2 + 1ï¼Œproduct_info_idç”Ÿæˆä¸ºé›ªèŠ±ç®—æ³•ï¼Œä¸ºåŒæ•°çš„æ•°æ®è¿›å…¥product_info_1è¡¨ï¼Œä¸ºå•æ•°çš„è¿›å…¥product_info_2è¡¨
spring.shardingsphere.sharding.tables.product_info.actualâ€dataâ€nodes = ds$â€>{1..2}.product_info_$â€>{1..2}
spring.shardingsphere.sharding.tables.product_info.tableâ€strategy.inline.shardingâ€column = product_info_id
spring.shardingsphere.sharding.tables.product_info.tableâ€strategy.inline.algorithmâ€expression =product_info_$â€>{product_info_id % 2 + 1}
spring.shardingsphere.sharding.tables.product_info.keyâ€generator.column=product_info_id
spring.shardingsphere.sharding.tables.product_info.keyâ€generator.type=SNOWFLAKE
# product_descriptåˆ†è¡¨ç­–ç•¥ï¼Œåˆ†å¸ƒåœ¨ds1,ds2çš„product_descript_1 product_descript_2è¡¨ ï¼Œåˆ†ç‰‡ç­–ç•¥ä¸ºproduct_info_id % 2 + 1ï¼Œidç”Ÿæˆä¸ºé›ªèŠ±ç®—æ³•ï¼Œproduct_info_idä¸ºåŒæ•°çš„æ•°æ®è¿›å…¥product_descript_1è¡¨ï¼Œä¸ºå•æ•°çš„è¿›å…¥product_descript_2è¡¨
spring.shardingsphere.sharding.tables.product_descript.actualâ€dataâ€nodes = ds$â€>{1..2}.product_descript_$â€>{1..2}
spring.shardingsphere.sharding.tables.product_descript.tableâ€strategy.inline.shardingâ€column = product_info_id
spring.shardingsphere.sharding.tables.product_descript.tableâ€strategy.inline.algorithmâ€expression = product_descript_$â€>{product_info_id % 2 + 1}
spring.shardingsphere.sharding.tables.product_descript.keyâ€generator.column=id
spring.shardingsphere.sharding.tables.product_descript.keyâ€generator.type=SNOWFLAKE

# è®¾ç½®product_info,product_descriptä¸ºç»‘å®šè¡¨ğŸŒŸ ğŸŒŸ ğŸŒŸ  ä½¿ç”¨é€»è¾‘è¡¨å
spring.shardingsphere.sharding.bindingâ€tables[0] = product_info,product_descript

# è®¾ç½®regionä¸ºå¹¿æ’­è¡¨(å…¬å…±è¡¨)ï¼Œæ¯æ¬¡æ›´æ–°æ“ä½œä¼šå‘é€è‡³æ‰€æœ‰æ•°æ®æº
spring.shardingsphere.sharding.broadcastâ€tables=region
# æ‰“å¼€sqlè¾“å‡ºæ—¥å¿—
spring.shardingsphere.props.sql.show = true